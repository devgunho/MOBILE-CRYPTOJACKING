<html>
<body bgcolor=#eeeeee>
<center>
<br>
<h1>Correspondence on the<br>Etymology of Wiki</h1>
<i>Ward Cunningham
<table width=600 cellspacing=10 cellpadding=10>
<tr><td>
I've corresponded with both an etymologist and a lexicographer regarding my creation of the word "wiki". The word's history is an often told story, but, for these professionals, I tried harder than usual to be clear and complete. These postings have been lightly edited for clarity and focus.
<tr>
<td align=center>
November, 2003
<tr>
<td bgcolor=white>
<br>
Dear Mr. Ward
<br>
<br>
It is a rare honor to write to someone such as you, the coiner of a
successful new word in the English language.
<br>
<br>
I am the etymologist for the American Heritage Dictionary at Houghton
Mifflin Company in Boston.  I was searching the web for the origin of the
word (and prefix) "wiki" and of course your page
<a href=http://c2.com/cgi/wiki?WikiHistory>http://c2.com/cgi/wiki?WikiHistory</a> came up.  I was wondering if you could
fill us in here at the dictionary with any more details on your use of the
Hawaiian word to the site and the web machinery. What year did this take
place? In 1995?  Do you have a long-standing interest in the Hawaiian
language, or did you come by the Hawaiian word by other means?  Did you
intend the word to be pronounced as wee-kee (rhyming with leaky) or as
wick-ey (rhyming with sticky)?  I ask because I did not quite understand
what you meant by "alliterative substitute".
<br>
<br>
I hope to be able to write a fuller etymology for our dictionary with this
information, something along the lines of the following: [Hawaiian
wiki-wiki'quick' (first applied to web software by American programmer Ward
Cunningham in 1995 as an alliterative/rhyming substitute for quick), from
Proto-Austronesian, akin to Rarutongan miji].  (Austronesian relations yet
to be researched, this is just an example).
<br>
<br>
Or perhaps you would prefer not have your name mentioned as the coiner of
this word? Perhaps there are legal issues involved, as the author of such
useful and widely used software. If so, please let me know and I will
follow your wishes.
<br>
<br>
You must be a very busy man, and I am sorry to intrude in this way, when
you are perhaps coining yet more words for the 21st century. I would be
extremely grateful for even the shortest of replies that you could spare
the time to make, confirming the facts you relate on your webpage.
<br>
<br>
Sincerely,<br>
Patrick Taylor<br>
<br>
Dictionary Department<br>
Trade & Reference Division<br>
Houghton Mifflin Company<br>
Boston, MA<br>
USA<br>
<br>


<tr><td align=center>
<br>
my reply

<tr>
<td bgcolor=white>
<br>
<font color=gray>
What year did this take
place? In 1995?
</font>
<br><br>

Yes. I wrote similar programs earlier but they did not run on the web and they were not called wiki.

<br><br>
<font color=gray>
Do you have a long-standing interest in the Hawaiian
language, or did you come by the Hawaiian word by other means?
</font>
<br><br>

Wiki wiki is the first Hawai'ian term I learned on my first visit to the islands. The airport counter agent directed me to take the wiki wiki bus between terminals. I said what? He explained that wiki wiki meant quick. I was to find the quick bus.

I did pick up a book about the language before my return home. I learned many things from this but wiki wiki is the word that sticks the most.

<br><br>
<font color=gray>
Did you
intend the word to be pronounced as wee-kee (rhyming with leaky) or as
wick-ey (rhyming with sticky)?
</font>
<br><br>

I believe the former is the proper pronunciation though I've been known to use the latter. My preference would be that the word be pronounced as a Hawai'ian would, and that wick-ey be an acceptable alternative.

<br><br>
<font color=gray>
I ask because I did not quite understand
what you meant by "alliterative substitute".
</font>
<br><br>

I thought "wiki wiki web" was more fun to say than "quick web", no mater what pronunciation is used. The name "quick web" would have been appropriate for a system that makes web pages quickly. Microsoft's "quick basic" was a precedent for such a name.

I chose to call the technology WikiWikiWeb. I used exactly this spacing and capitalization because the technology would then recognize the term as a hyperlink. I consider WikiWikiWeb to be the proper name of the concept, of which Wiki or wiki is an abbreviation.

My first implementation of WikiWikiWeb technology was as a unix program, a so called "cgi" script. Following unix convention I chose "wiki", a lower case abbreviation, as the program name. The short name shows up in the url for the site (<a href=http://c2.com/cgi/wiki>http://c2.com/cgi/wiki</a>) which surely encouraged people to abbreviate likewise.


<br><br>
<font color=gray>
I hope to be able to write a fuller etymology for our dictionary with this
information, something along the lines of the following: [Hawaiian
wiki-wiki'quick' (first applied to web software by American programmer Ward
Cunningham in 1995 as an alliterative/rhyming substitute for quick), from
Proto-Austronesian, akin to Rarutongan miji].  (Austronesian relations yet
to be researched, this is just an example).
</font>
<br><br>

I have no objection to such a listing so long as the Hawai'ian roots are in fact correct. Also, I don't understand the punctuation wiki-wiki'quick'. Do the quotes mean that quick is the meaning of wiki-wiki?

<br><br>
<font color=gray>
Or perhaps you would prefer not have your name mentioned as the coiner of
this word? Perhaps there are legal issues involved, as the author of such
useful and widely used software. If so, please let me know and I will
follow your wishes.
</font>
<br><br>

I am pleased to have created a widely copied idea. I do not object to having my name included in the definition.

<br><br>
<font color=gray>
You must be a very busy man, and I am sorry to intrude in this way, when
you are perhaps coining yet more words for the 21st century.
</font>
<br><br>


I have coined a few, but this is my biggest so far. Thank you.
<br><br>

<tr>
<td align=center>
<br>
his reply

<tr>
<td bgcolor=white>
<br>

Thank you for your kind reply!  It will be very helpful in writing a
concise etymology that illustrates well how new words are formed in the
modern world.  I like the episode about the bus.<br><br>



In the sample etymology I offer, the cognates (related words) from the
other Austronesian languages may be not be correct--I have not thoroughly
researched the matter.  The only extensive dictionary for a Polynesian
language besides Hawaiian that I could find online was for Rarotongan, and
mijiwas the only word for "quick" which Iooked as if it might be related to
the Hawaiian word, a mere guess on my part.  If you could give me a day or
two to consult the comparative Austronesian etymological dictionaries in
order find the correct etymology of the Hawaiian word, then I could send
you a revised version. You could also post that as a correction or simply
doctor the text of my letter to make it correct, as you see fit. <font color=gray>[still awaiting correction]</font>
Considering how quickly and easily information spreads in the modern world,
thanks to efforts and expertise of people such as yourself, I would like to
have the correct etymology posted as well (and stop any stupid mistakes I
have made at their source--namely me).<br><br>

The punctuation you ask about was just my attempt to distinguish the
Hawaiian word from its meaning, as you perceived.  In our dictionary the
wiki wiki will be in Italic, while the meaning will be in Roman type,
something like:  [Hawaiian wiki wiki,quick, applied by programmer Ward
Cunningham....]<br><br>

<tr>
<td align=center>
<br>
February, 2005

<tr>
<td bgcolor=white>
<br>
Dear Ward<br>
<br>
I'm a lexicographer working on current English Dictionaries for Oxford University Press [publishers of the Oxford English Dictionary] in the UK. We're preparing a new edition of our largest current English dictionary and wiki is one of the new words we intend to include.<br>
<br>
We're particularly interested in pinning down the origin of the word wiki - you say on your website that you chose wiki as an alliterative alternative to quick in the word wikiwikiweb , but of course wiki is Hawaiian for 'quick' - as you say elsewhere on your site. So what I'd like to clarify is: did you choose wiki and then find out it was a Hawaiian word, or did you choose it  knowing what it meant in Hawaiian? Sorry to be pedantic, but that's what lexicographers do ..<br>
<br>
Regards<br>
<br>
Catherine Soanes <br>
Project Manager <br>
Current English Dictionaries <br>
Oxford University Press<br>
<br>
<br>

<tr><td align=center>
<br>
my reply

<tr><td bgcolor=white>
<br>
I chose the word wiki knowing that it meant quick. I also knew that in Hawaiian words were doubled for emphasis. That is, I knew that wiki wiki meant very quick. I thought this doubling was appropriate for my technology's name because I used unusual doublings in my application as formatting clues: double carriage-return = new paragraph; double single-quote = italic; double capitalized-word = hyperlink. My program was also very quick.<br><br>

Using the word doubling convention, I named the technology WikiWikiWeb. Note the absence of spaces in this word. My first implementation was as a Unix program, which are traditionally radically abbreviated and all lower case: cal for Calendar. So, following this convention, my first implementation of WikiWikiWeb technology was with a program named wiki. This shows up in the URL for the site and has become the shorthand term for the technology.<br><br>

I learned the word wiki on my first visit to Hawai'i when I was directed to the airport shuttle, called the Wiki Wiki Bus. I asked for that direction to be repeated three or four times until the airline representative took the time to define the word wiki for me. The next day I picked up a small book about Hawai'ian and learned more interesting things about the language.<br><br>

I wanted an unusual word to name for what was an unusual technology. I was not trying to duplicate any existing medium, like mail, so I didn't want a name like electronic mail (email) for my work. The community that formed around my site were willing to explore its capabilities without preconceived notions of how it should work. An example of such a notion is the "timeless now" in which "conversation" takes place. Curiously, Wikipedia aspires to be only an encyclopedia, but has inherited many of the non-encyclopedic properties of my original site. Wikipedia would not be as successful as it is now had I named WikiWikiWeb "electronic-encyclopedia". Its unique social conventions and properties would not have evolved.<br><br>

Professionally I study how programmers think about the structures they create within their programs. I'm a proponent of systematic naming of computer structures based on continuously evolving metaphor. I'm inspired by the cognitive psychologist George Lakoff. My work has lead to the development of "automatic refactoring tools" that can, among other things, correct poorly chosen names in large computer programs. My work helps programmers think clearly about the universes they create. I hope that this will improve the computer experience for all users.<br><br>



</table>
&copy; 2005



#####EOF#####


<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="favicon.gif">

</head>
<body>

<style>
  #page {
    max-width: 500px;
    margin: 15px;
    word-wrap: break-word;
  }
  h1 {
    display: flex;
    align-items: baseline;
  }
  h1 span {
    display: inline-block;
    margin: 0 0 0 10px;
  }
  img {
    max-width: 500px;
  }
  pre {
    word-wrap: break-word;
    white-space: pre-wrap;
  }
  a {
    text-decoration: none;
  }
  input {
    width: 60%;
  }
  ul, ol {
    padding-left: 1em;
  }
  dd {
    margin: 1em;
  }
</style>

<div id=page>
 <img src="spin.gif">
</div>

<script>

  var title
  var names

  function escape (text) {
    return text
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
  }
  function emphasis (text) {
    return text
      .replace(/'''(.*?)'''/g, '<strong>$1<\/strong>')
      .replace(/''(.*?)''/g, '<em>$1<\/em>')
      .replace(/^-----*/, '<hr>')
  }

  var code = ''
  var codes = []
  function enter(key, replacement) {
    // $code = $key;
    // while (@code > $depth) {local($_) = pop @code; print "</$_>\n"}
    // while (@code < $depth) {push (@code, $key); print "<$key>\n"}
    // if ($code[$#code] ne $key) {
    //   print "</$code[$#code]><$key>\n";
    //   $code[$#code] = $key;
    // }
    return function (match, p1, p2) {
      var depth = p1.length || 0
      var adjust = ''
      code = key
      if (code != '...') {
        while (codes.length > depth) { adjust += "</" + codes.pop() + ">" }
        while (codes.length < depth) { adjust += "<" + key + ">"; codes.push(key) }
        if (codes.length && codes[codes.length-1] != key) {
          adjust += "</" + codes[codes.length-1] + "><" + key + ">"
          codes[codes.length-1] = key
        }
      }
      return adjust + replacement.replace(/{p1}/, p1).replace(/{p2}/, p2)
    }
  }
  function complete (text) {
    return enter("", "")("","","") + text
  }
  function bullets (text) {
    // $code = "";
    // s/^\s*$/<p><\/p>/                && ($code = '...');
    // s/^(\t+)(.+):\t/<dt>$2<dd>/      && &enter('DL', length $1);
    // s/^(\t+)\*/<li>/                 && &enter('UL', length $1);
    // s/^(\*+)/<li>/                   && &enter('UL', length $1);
    // s/^(\t+)\d+\.?/<li>/             && &enter('OL', length $1);
    // /^\s/                            && &enter('PRE', 1);
    code = ''
    result = text
      .replace(/^\s*$/,                 enter('...', '<p></p>' ) )
      .replace(/^(\t+)(.+):\t/,         enter('DL',  '<dt>{p2}<dd>') )
      .replace(/^(\t+)\*/,              enter('UL',  '<li>') )
      .replace(/^(\*+)/,                enter('UL',  '<li>') )
      .replace(/^(\t+)\d+\.?/,          enter('OL',  '<li>') )
      .replace(/^(\s)/,                 enter('PRE', '{p1}') )
    return result
  }
  function links (text, sanitize) {
    // link conversion happens in four phases:
    //   unexpected markers are adulterated
    //   links are found, converted, and stashed away properly escaped
    //   remaining text is processed and escaped
    //   unique markers are replaced with unstashed links
    var stashed = []
    function stash (text) {
      var here = stashed.length
      stashed.push(text)
      return "ã" + here + "ã"
    }
    function unstash (match, digits) {
      return stashed[+digits]
    }
    function internal (title) {
      if (names && names.indexOf(title)!=-1) {
        var url = location.origin + location.pathname + "?" + title
        return stash("<a href=\""  + url + "\">" + title + "</a>")
      } else {
        return title
      }
    }
    function external (url) {
      if (url.match(/\.(gif|jpg|jpeg|png)$/)) {
        return stash("<img src=\"" + url.replace(/^http:\/wiki\//,'http://c2.com/wiki/') + "\">")
      } else {
        return stash("<a href=\"" + url + "\" rel=\"nofollow\" target=\"_blank\">" + url + "</a>")
      }
    }
    function youtube (match, p1, p2) {
      var embed =
        "<object width=\"425\" height=\"344\">" +
        "<param name=\"movie\" value=\"http://www.youtube.com/v/$2&hl=en&fs=1&\"></param>" +
        "<param name=\"allowFullScreen\" value=\"true\"></param>" +
        "<param name=\"allowscriptaccess\" value=\"always\"></param>" +
        "<embed src=\"http://www.youtube.com/v/" + p2 + "&hl=en&fs=1&\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"always\" allowfullscreen=\"true\" width=\"425\" height=\"344\"></embed>" +
        "</object>"
      return stash(embed)
    }
    function isbn (match, isbn) {
      var code = isbn.replace(/[- ]/g, "")
      if (code.match(/^\d{9}.$/)) {
        return stash("<a href=\"http://www.amazon.com/exec/obidos/ISBN=" + code + "/portlandpatternrA/\" rel=\"nofollow\">ISBN " + isbn + "</a>")
      } else {
        return "ISBN " + isbn
      }
    }
    function titlesearch () {
      function link(text) {
        return "<a href=?" + text + ">" + text + "</a>"
      }
      get = function() {
        var want = search.value
        if (want.length > 1) {
          var found = names.filter(function (e) { return e.includes(want) })
          if (found.length) {
            return window.searchresult.innerHTML = found.slice(0,500).map(link).join('<br>')
          }
        }
        window.searchresult.innerHTML = ''
      }
      got = function (e) {
        if (!e) e = window.event;
        if ((e.keyCode || e.which) == '13') {
          search.value = ''
          window.searchresult.innerHTML = ''
        }
      }
      return stash("<input type=text id=search onInput='get()' onKeyPress='got()'><br><div id=searchresult></div>")
    }
    function fullsearch () {
      return stash("<form action=\"http://c2.com/cgi/fullSearch\"><input type=text name=search></form>")
    }
    var prepass = text
      .replace(/ã(\d+)ã/g, 'ã $1 ã')
      .replace(/^http:\/\/(www.)?youtube.com\/watch\?v=([-\w]+)/, youtube)
      .replace(/\[Search\]/, titlesearch)
      .replace(/\[Fullsearch\]/, fullsearch)
      .replace(/\[?ISBN:? *([0-9- xX]{10,})\]?/i, isbn)
      .replace(/\b(https?|ftp|mailto|file|telnet|news):[^\s<>\[\]"'\(\)]*[^\s<>\[\]"'\(\)\,\.\?]/g,external)
      .replace(/\b[A-Z][a-z]+([A-Z][a-z]+)+\b/g, internal)
    var postpass = sanitize(prepass)
      .replace(/ã(\d+)ã/g, unstash)
    if (code == '') {
      postpass = complete(postpass)
    }
    return postpass
  }
  function inner (text) {
    text = escape(text)
    text = bullets(text)
    text = emphasis(text)
    return text
  }
  function render (text) {
    return links(text, inner)
  }
  function markup (text) {
    var lines = text.replace(/\\\n/,' ').split(/\n/)
    var expand = lines.map(render).join("\n")
    return expand + complete('')
  }
  function trouble (msg) {
    var recourse = "<br>See <a href=https://github.com/WardCunningham/remodeling/issues/2 target=\"_blank\">github</a></p>"
    page.innerHTML = "<p>Trouble Encountered<br>" + msg + recourse
  }
  function head() {
    var words = document.title = title.replace(/([a-z])([A-Z])/g, '$1 $2');
    return [
      '<h1><img src=wiki.gif><div><span>',
      '<a href="http://c2.com/cgi/fullSearch?search=' + title + '" rel=nofollow>' + words + '</a>',
      '</span></div></h1>'
    ].join('')
  }
  function foot(json) {
    return [
      '<hr>Last edit ',
      json.date,
      ', See <a href=https://github.com/WardCunningham/remodeling target="_blank">github</a> about remodling.'
    ].join('')
  }
  function anypage () {
    var any = Math.floor(Math.random() * names.length)
    return '*' + names[any]
  }
  function show (json) {
    if (Object.keys(json).length == 0) {
      trouble('Page unavailable until conversion completed.')
    } else {
      if (title == 'RandomPages') {
        json.text = json.text.replace(/\*\w+/g, anypage)
      }
      page.innerHTML = head() + markup(json.text) + foot(json)
    }
  }
  function loadDoc(url, done) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4) {
        if (this.status == 200) {
          done(this.responseText)
        } else {
          trouble(url + "<br>can't fetch document<br>" + this.statusText)
        }
      }
    }
    xhttp.open("GET", url, true);
    xhttp.send();
  }
  function fetchNames (done) {
    loadDoc('names.txt', done)
  }
  function fetchPage (done) {
    title = (location.search.match(/\w+/)||["WelcomeVisitors"])[0]
    var database = 'http://c2.com/wiki/remodel/pages/'
    loadDoc(database + title, done)
  }
  function init() {
    var json
    function ready () { names && json && show(json) }
    fetchNames(function(data) { names = data.split(/\r?\n/); ready()})
    fetchPage(function(data) { json = JSON.parse(data); ready()})
  }

  if (!window.location.origin) {
    // https://github.com/WardCunningham/remodeling/issues/20
    window.location.origin = window.location.protocol + '//' +
      window.location.hostname +
      (window.location.port ? (':' + window.location.port) : '');
  }

  init()

</script>
<script async defer src="https://hypothes.is/embed.js"></script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">_uacct = "UA-2377314-2";_udn="c2.com"; urchinTracker();</script>

</body>
</html>

  


#####EOF#####


<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="favicon.gif">

</head>
<body>

<style>
  #page {
    max-width: 500px;
    margin: 15px;
    word-wrap: break-word;
  }
  h1 {
    display: flex;
    align-items: baseline;
  }
  h1 span {
    display: inline-block;
    margin: 0 0 0 10px;
  }
  img {
    max-width: 500px;
  }
  pre {
    word-wrap: break-word;
    white-space: pre-wrap;
  }
  a {
    text-decoration: none;
  }
  input {
    width: 60%;
  }
  ul, ol {
    padding-left: 1em;
  }
  dd {
    margin: 1em;
  }
</style>

<div id=page>
 <img src="spin.gif">
</div>

<script>

  var title
  var names

  function escape (text) {
    return text
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
  }
  function emphasis (text) {
    return text
      .replace(/'''(.*?)'''/g, '<strong>$1<\/strong>')
      .replace(/''(.*?)''/g, '<em>$1<\/em>')
      .replace(/^-----*/, '<hr>')
  }

  var code = ''
  var codes = []
  function enter(key, replacement) {
    // $code = $key;
    // while (@code > $depth) {local($_) = pop @code; print "</$_>\n"}
    // while (@code < $depth) {push (@code, $key); print "<$key>\n"}
    // if ($code[$#code] ne $key) {
    //   print "</$code[$#code]><$key>\n";
    //   $code[$#code] = $key;
    // }
    return function (match, p1, p2) {
      var depth = p1.length || 0
      var adjust = ''
      code = key
      if (code != '...') {
        while (codes.length > depth) { adjust += "</" + codes.pop() + ">" }
        while (codes.length < depth) { adjust += "<" + key + ">"; codes.push(key) }
        if (codes.length && codes[codes.length-1] != key) {
          adjust += "</" + codes[codes.length-1] + "><" + key + ">"
          codes[codes.length-1] = key
        }
      }
      return adjust + replacement.replace(/{p1}/, p1).replace(/{p2}/, p2)
    }
  }
  function complete (text) {
    return enter("", "")("","","") + text
  }
  function bullets (text) {
    // $code = "";
    // s/^\s*$/<p><\/p>/                && ($code = '...');
    // s/^(\t+)(.+):\t/<dt>$2<dd>/      && &enter('DL', length $1);
    // s/^(\t+)\*/<li>/                 && &enter('UL', length $1);
    // s/^(\*+)/<li>/                   && &enter('UL', length $1);
    // s/^(\t+)\d+\.?/<li>/             && &enter('OL', length $1);
    // /^\s/                            && &enter('PRE', 1);
    code = ''
    result = text
      .replace(/^\s*$/,                 enter('...', '<p></p>' ) )
      .replace(/^(\t+)(.+):\t/,         enter('DL',  '<dt>{p2}<dd>') )
      .replace(/^(\t+)\*/,              enter('UL',  '<li>') )
      .replace(/^(\*+)/,                enter('UL',  '<li>') )
      .replace(/^(\t+)\d+\.?/,          enter('OL',  '<li>') )
      .replace(/^(\s)/,                 enter('PRE', '{p1}') )
    return result
  }
  function links (text, sanitize) {
    // link conversion happens in four phases:
    //   unexpected markers are adulterated
    //   links are found, converted, and stashed away properly escaped
    //   remaining text is processed and escaped
    //   unique markers are replaced with unstashed links
    var stashed = []
    function stash (text) {
      var here = stashed.length
      stashed.push(text)
      return "ã" + here + "ã"
    }
    function unstash (match, digits) {
      return stashed[+digits]
    }
    function internal (title) {
      if (names && names.indexOf(title)!=-1) {
        var url = location.origin + location.pathname + "?" + title
        return stash("<a href=\""  + url + "\">" + title + "</a>")
      } else {
        return title
      }
    }
    function external (url) {
      if (url.match(/\.(gif|jpg|jpeg|png)$/)) {
        return stash("<img src=\"" + url.replace(/^http:\/wiki\//,'http://c2.com/wiki/') + "\">")
      } else {
        return stash("<a href=\"" + url + "\" rel=\"nofollow\" target=\"_blank\">" + url + "</a>")
      }
    }
    function youtube (match, p1, p2) {
      var embed =
        "<object width=\"425\" height=\"344\">" +
        "<param name=\"movie\" value=\"http://www.youtube.com/v/$2&hl=en&fs=1&\"></param>" +
        "<param name=\"allowFullScreen\" value=\"true\"></param>" +
        "<param name=\"allowscriptaccess\" value=\"always\"></param>" +
        "<embed src=\"http://www.youtube.com/v/" + p2 + "&hl=en&fs=1&\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"always\" allowfullscreen=\"true\" width=\"425\" height=\"344\"></embed>" +
        "</object>"
      return stash(embed)
    }
    function isbn (match, isbn) {
      var code = isbn.replace(/[- ]/g, "")
      if (code.match(/^\d{9}.$/)) {
        return stash("<a href=\"http://www.amazon.com/exec/obidos/ISBN=" + code + "/portlandpatternrA/\" rel=\"nofollow\">ISBN " + isbn + "</a>")
      } else {
        return "ISBN " + isbn
      }
    }
    function titlesearch () {
      function link(text) {
        return "<a href=?" + text + ">" + text + "</a>"
      }
      get = function() {
        var want = search.value
        if (want.length > 1) {
          var found = names.filter(function (e) { return e.includes(want) })
          if (found.length) {
            return window.searchresult.innerHTML = found.slice(0,500).map(link).join('<br>')
          }
        }
        window.searchresult.innerHTML = ''
      }
      got = function (e) {
        if (!e) e = window.event;
        if ((e.keyCode || e.which) == '13') {
          search.value = ''
          window.searchresult.innerHTML = ''
        }
      }
      return stash("<input type=text id=search onInput='get()' onKeyPress='got()'><br><div id=searchresult></div>")
    }
    function fullsearch () {
      return stash("<form action=\"http://c2.com/cgi/fullSearch\"><input type=text name=search></form>")
    }
    var prepass = text
      .replace(/ã(\d+)ã/g, 'ã $1 ã')
      .replace(/^http:\/\/(www.)?youtube.com\/watch\?v=([-\w]+)/, youtube)
      .replace(/\[Search\]/, titlesearch)
      .replace(/\[Fullsearch\]/, fullsearch)
      .replace(/\[?ISBN:? *([0-9- xX]{10,})\]?/i, isbn)
      .replace(/\b(https?|ftp|mailto|file|telnet|news):[^\s<>\[\]"'\(\)]*[^\s<>\[\]"'\(\)\,\.\?]/g,external)
      .replace(/\b[A-Z][a-z]+([A-Z][a-z]+)+\b/g, internal)
    var postpass = sanitize(prepass)
      .replace(/ã(\d+)ã/g, unstash)
    if (code == '') {
      postpass = complete(postpass)
    }
    return postpass
  }
  function inner (text) {
    text = escape(text)
    text = bullets(text)
    text = emphasis(text)
    return text
  }
  function render (text) {
    return links(text, inner)
  }
  function markup (text) {
    var lines = text.replace(/\\\n/,' ').split(/\n/)
    var expand = lines.map(render).join("\n")
    return expand + complete('')
  }
  function trouble (msg) {
    var recourse = "<br>See <a href=https://github.com/WardCunningham/remodeling/issues/2 target=\"_blank\">github</a></p>"
    page.innerHTML = "<p>Trouble Encountered<br>" + msg + recourse
  }
  function head() {
    var words = document.title = title.replace(/([a-z])([A-Z])/g, '$1 $2');
    return [
      '<h1><img src=wiki.gif><div><span>',
      '<a href="http://c2.com/cgi/fullSearch?search=' + title + '" rel=nofollow>' + words + '</a>',
      '</span></div></h1>'
    ].join('')
  }
  function foot(json) {
    return [
      '<hr>Last edit ',
      json.date,
      ', See <a href=https://github.com/WardCunningham/remodeling target="_blank">github</a> about remodling.'
    ].join('')
  }
  function anypage () {
    var any = Math.floor(Math.random() * names.length)
    return '*' + names[any]
  }
  function show (json) {
    if (Object.keys(json).length == 0) {
      trouble('Page unavailable until conversion completed.')
    } else {
      if (title == 'RandomPages') {
        json.text = json.text.replace(/\*\w+/g, anypage)
      }
      page.innerHTML = head() + markup(json.text) + foot(json)
    }
  }
  function loadDoc(url, done) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4) {
        if (this.status == 200) {
          done(this.responseText)
        } else {
          trouble(url + "<br>can't fetch document<br>" + this.statusText)
        }
      }
    }
    xhttp.open("GET", url, true);
    xhttp.send();
  }
  function fetchNames (done) {
    loadDoc('names.txt', done)
  }
  function fetchPage (done) {
    title = (location.search.match(/\w+/)||["WelcomeVisitors"])[0]
    var database = 'http://c2.com/wiki/remodel/pages/'
    loadDoc(database + title, done)
  }
  function init() {
    var json
    function ready () { names && json && show(json) }
    fetchNames(function(data) { names = data.split(/\r?\n/); ready()})
    fetchPage(function(data) { json = JSON.parse(data); ready()})
  }

  if (!window.location.origin) {
    // https://github.com/WardCunningham/remodeling/issues/20
    window.location.origin = window.location.protocol + '//' +
      window.location.hostname +
      (window.location.port ? (':' + window.location.port) : '');
  }

  init()

</script>
<script async defer src="https://hypothes.is/embed.js"></script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">_uacct = "UA-2377314-2";_udn="c2.com"; urchinTracker();</script>

</body>
</html>

  


#####EOF#####


